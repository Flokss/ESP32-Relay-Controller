# ESP32 Relay Controller (Relay8)

–ü—Ä–æ–µ–∫—Ç **ESP32 Relay Controller** –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è 8 —Ä–µ–ª–µ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ MQTT.

## üìå –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã:

- **–†–µ–∂–∏–º —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞ (AP)** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ WiFi –∏ MQTT —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
- **–†–µ–∂–∏–º –∫–ª–∏–µ–Ω—Ç–∞ (STA)** ‚Äî —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ WiFi –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–ª–µ.

## üî• –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –î–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã (AP –∏ STA).
- MQTT-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.
- –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–ª–µ.
- –ü–µ—Ä–µ–∫—Ä—ë—Å—Ç–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.
- –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–µ–ª–µ.
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π —Ä–µ–ª–µ –≤ **LittleFS**.
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–æ–≥–∏–∫–æ–π —Ä–µ–ª–µ (**HIGH/LOW**).

## üì¶ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ
- **ESP32** (NodeMCU, Wemos Lolin32 –∏ —Ç. –¥.)

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ
- **Arduino IDE** 1.8+ –∏–ª–∏ 2.0+

---

## üìå –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ä–µ–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. –°–∫–∞—á–∞–π—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ **Arduino IDE**.
2. –î–æ–±–∞–≤—å—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫—É **ESP32**:
   - –û—Ç–∫—Ä–æ–π—Ç–µ **Arduino IDE** ‚Üí **–§–∞–π–ª** ‚Üí **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**.
   - –í –ø–æ–ª–µ **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ URL-–∞–¥—Ä–µ—Å–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–ª–∞—Ç** –¥–æ–±–∞–≤—å—Ç–µ:
     ```
     https://dl.espressif.com/dl/package_esp32_index.json
     ```
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã** ‚Üí **–ü–ª–∞—Ç–∞** ‚Üí **–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–ª–∞—Ç**.
   - –ù–∞–π–¥–∏—Ç–µ **ESP32 by Espressif Systems** –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é.

### 2Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫

–û—Ç–∫—Ä–æ–π—Ç–µ **–ú–µ–Ω–µ–¥–∂–µ—Ä –±–∏–±–ª–∏–æ—Ç–µ–∫** (**–°–∫–µ—Ç—á** ‚Üí **–ü–æ–¥–∫–ª—é—á–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É** ‚Üí **–£–ø—Ä–∞–≤–ª—è—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏**) –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:

- `WiFi` (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è ESP32)
- `PubSubClient` (–¥–ª—è MQTT)
- `AsyncTCP`
- `ESPAsyncWebServer`
- `ArduinoJson` (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å JSON)
- `LittleFS` (–¥–ª—è —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã)
- `DNSServer` (–¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ AP-—Ä–µ–∂–∏–º–µ)

### 3Ô∏è‚É£ –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∫–µ—Ç—á–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª **esp32_8relay.ino** –≤ **Arduino IDE**.
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–∞—Ç—É: **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã** ‚Üí **–ü–ª–∞—Ç–∞** ‚Üí **ESP32 Dev Module** (–∏–ª–∏ –¥—Ä—É–≥—É—é –≤–∞—à—É –ø–ª–∞—Ç—É ESP32).
3. –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Ä—Ç: **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã** ‚Üí **–ü–æ—Ä—Ç** ‚Üí (–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π COM-–ø–æ—Ä—Ç).
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏: **921600**.
5. –ù–∞–∂–º–∏—Ç–µ **–ó–∞–≥—Ä—É–∑–∏—Ç—å** (–∫–Ω–æ–ø–∫–∞ "–°—Ç—Ä–µ–ª–∫–∞ –≤–ø—Ä–∞–≤–æ" –≤ Arduino IDE).

### 4Ô∏è‚É£ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –≤ LittleFS

–í–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ **LittleFS**. –î–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤:

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–ª–∞–≥–∏–Ω **ESP32 LittleFS Data Upload**:
   - **–°–∫–∞—á–∞—Ç—å –ø–ª–∞–≥–∏–Ω**
   - –†–∞–∑–º–µ—Å—Ç–∏—Ç–µ –µ–≥–æ –≤ –ø–∞–ø–∫–µ:
     ```
     C:\Users\–í–∞—à–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å\Documents\Arduino\tools
     ```
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ **Arduino IDE**.
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã** ‚Üí **ESP32 LittleFS Data Upload**.
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à **COM-–ø–æ—Ä—Ç** –∏ –Ω–∞–∂–º–∏—Ç–µ **Upload**.

---

## üîå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤–∫–ª—é—á–µ–Ω–∏–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ **AP**, —Å–æ–∑–¥–∞–≤–∞—è —Å–µ—Ç—å **RelayController** —Å –ø–∞—Ä–æ–ª–µ–º `config1234`.
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —ç—Ç–æ–π —Å–µ—Ç–∏ –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ `http://192.168.4.1`, —á—Ç–æ–±—ã –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å WiFi –∏ MQTT.
3. –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ **ESP32** –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ WiFi, –∏ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–ª–µ.
4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ª–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ **–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –∏–ª–∏ –ø–æ **MQTT**.

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MQTT

- **MQTT —Å–µ—Ä–≤–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**: `mqtt.eclipseprojects.io`
- **–¢–æ–ø–∏–∫–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–ª–µ**: `home/relays/relayX`, –≥–¥–µ `X` ‚Äî –Ω–æ–º–µ—Ä —Ä–µ–ª–µ (–æ—Ç 0 –¥–æ 7)
- **–í–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã**: `ON` –∏ `OFF`

## ‚öôÔ∏è –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å **–≥–ª–æ–±–∞–ª—å–Ω—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å** –¥–ª—è –≤—Å–µ—Ö —Ä–µ–ª–µ:

- `HIGH` : –†–µ–ª–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–¥–∞—á–µ **HIGH**.
- `LOW` : –†–µ–ª–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–¥–∞—á–µ **LOW**.

---

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π **MIT**.

---

## üì© –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:

- –°–æ–∑–¥–∞–π—Ç–µ **issue** –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

